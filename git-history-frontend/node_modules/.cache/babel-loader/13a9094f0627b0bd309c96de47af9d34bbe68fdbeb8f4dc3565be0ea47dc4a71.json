{"ast":null,"code":"import React,{useEffect}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";function GitGraph(_ref){var commits=_ref.commits,onSelectCommit=_ref.onSelectCommit;useEffect(function(){if(commits.length===0)return;// Clear existing SVG (if any) before drawing\nd3.select(\"#git-graph\").html(\"\");var circleRadius=15;var circleSpacing=50;var svgWidth=800;var svgHeight=commits.length*circleSpacing+circleRadius*2;var svg=d3.select(\"#git-graph\").append(\"svg\").attr(\"viewBox\",\"0 0 \".concat(svgWidth,\" \").concat(svgHeight)).style(\"max-width\",\"100%\").style(\"height\",\"auto\");// Lines connecting commits\nsvg.selectAll(\"line\").data(commits.slice(1)).enter().append(\"line\").attr(\"x1\",svgWidth/2).attr(\"y1\",function(d,i){return i*circleSpacing+circleRadius;}).attr(\"x2\",svgWidth/2).attr(\"y2\",function(d,i){return(i+1)*circleSpacing;}).attr(\"stroke\",\"#999\").attr(\"stroke-width\",2);// Circles representing commits\nvar circles=svg.selectAll(\"circle\").data(commits).enter().append(\"circle\").attr(\"cx\",svgWidth/2).attr(\"cy\",function(d,i){return i*circleSpacing+circleRadius;}).attr(\"r\",circleRadius).attr(\"fill\",\"#3498db\").attr(\"stroke\",\"#2980b9\").attr(\"stroke-width\",3);// Hover effects\ncircles.on(\"mouseover\",function(){d3.select(this).attr(\"fill\",\"#e74c3c\");}).on(\"mouseout\",function(){d3.select(this).attr(\"fill\",\"#3498db\");}).on(\"click\",function(event,d){onSelectCommit(d);});// Commit date and message\nsvg.selectAll(\"text.date\").data(commits).enter().append(\"text\").attr(\"class\",\"date\").attr(\"x\",svgWidth/2+circleRadius+10).attr(\"y\",function(d,i){return i*circleSpacing+circleRadius;}).attr(\"alignment-baseline\",\"middle\").text(function(d){return new Date(d.commit.author.date).toLocaleDateString();});svg.selectAll(\"text.message\").data(commits).enter().append(\"text\").attr(\"class\",\"message\").attr(\"x\",svgWidth/2+circleRadius+100)// Adjust for better positioning\n.attr(\"y\",function(d,i){return i*circleSpacing+circleRadius;}).attr(\"alignment-baseline\",\"middle\").attr(\"text-anchor\",\"start\").text(function(d){return d.commit.message.split(\"\\n\")[0];})// Display only the first line of the commit message\n.attr(\"clip-path\",\"url(#clip)\");// Define a clip-path to truncate long commit messages\nsvg.append(\"defs\").append(\"clipPath\").attr(\"id\",\"clip\").append(\"rect\").attr(\"x\",svgWidth/2+circleRadius+100).attr(\"y\",0).attr(\"width\",svgWidth-(svgWidth/2+circleRadius+120)).attr(\"height\",svgHeight);},[commits,onSelectCommit]);return/*#__PURE__*/_jsx(\"div\",{id:\"git-graph\"});}export default GitGraph;","map":{"version":3,"names":["React","useEffect","d3","jsx","_jsx","GitGraph","_ref","commits","onSelectCommit","length","select","html","circleRadius","circleSpacing","svgWidth","svgHeight","svg","append","attr","concat","style","selectAll","data","slice","enter","d","i","circles","on","event","text","Date","commit","author","date","toLocaleDateString","message","split","id"],"sources":["/Users/jason/visual-git-history-viewer/git-history-frontend/src/components/GitGraph.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nfunction GitGraph({ commits, onSelectCommit }) {\n    useEffect(() => {\n        if (commits.length === 0) return;\n\n        // Clear existing SVG (if any) before drawing\n        d3.select(\"#git-graph\").html(\"\");\n\n        const circleRadius = 15;\n        const circleSpacing = 50;\n        const svgWidth = 800;\n        const svgHeight = commits.length * circleSpacing + circleRadius * 2;\n\n        const svg = d3.select(\"#git-graph\")\n        .append(\"svg\")\n        .attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`)\n        .style(\"max-width\", \"100%\")\n        .style(\"height\", \"auto\");\n    \n        // Lines connecting commits\n        svg.selectAll(\"line\")\n            .data(commits.slice(1))\n            .enter()\n            .append(\"line\")\n            .attr(\"x1\", svgWidth / 2)\n            .attr(\"y1\", (d, i) => i * circleSpacing + circleRadius)\n            .attr(\"x2\", svgWidth / 2)\n            .attr(\"y2\", (d, i) => (i + 1) * circleSpacing)\n            .attr(\"stroke\", \"#999\")\n            .attr(\"stroke-width\", 2);\n\n        // Circles representing commits\n        const circles = svg.selectAll(\"circle\")\n            .data(commits)\n            .enter()\n            .append(\"circle\")\n            .attr(\"cx\", svgWidth / 2)\n            .attr(\"cy\", (d, i) => i * circleSpacing + circleRadius)\n            .attr(\"r\", circleRadius)\n            .attr(\"fill\", \"#3498db\")\n            .attr(\"stroke\", \"#2980b9\")\n            .attr(\"stroke-width\", 3);\n\n        // Hover effects\n        circles.on(\"mouseover\", function() {\n                d3.select(this).attr(\"fill\", \"#e74c3c\");\n            })\n            .on(\"mouseout\", function() {\n                d3.select(this).attr(\"fill\", \"#3498db\");\n            })\n            .on(\"click\", (event, d) => {\n                onSelectCommit(d);\n            });\n\n        // Commit date and message\n        svg.selectAll(\"text.date\")\n            .data(commits)\n            .enter()\n            .append(\"text\")\n            .attr(\"class\", \"date\")\n            .attr(\"x\", svgWidth / 2 + circleRadius + 10)\n            .attr(\"y\", (d, i) => i * circleSpacing + circleRadius)\n            .attr(\"alignment-baseline\", \"middle\")\n            .text(d => new Date(d.commit.author.date).toLocaleDateString());\n\n        svg.selectAll(\"text.message\")\n            .data(commits)\n            .enter()\n            .append(\"text\")\n            .attr(\"class\", \"message\")\n            .attr(\"x\", svgWidth / 2 + circleRadius + 100) // Adjust for better positioning\n            .attr(\"y\", (d, i) => i * circleSpacing + circleRadius)\n            .attr(\"alignment-baseline\", \"middle\")\n            .attr(\"text-anchor\", \"start\")\n            .text(d => d.commit.message.split(\"\\n\")[0]) // Display only the first line of the commit message\n            .attr(\"clip-path\", \"url(#clip)\");\n\n        // Define a clip-path to truncate long commit messages\n        svg.append(\"defs\")\n            .append(\"clipPath\")\n            .attr(\"id\", \"clip\")\n            .append(\"rect\")\n            .attr(\"x\", svgWidth / 2 + circleRadius + 100)\n            .attr(\"y\", 0)\n            .attr(\"width\", svgWidth - (svgWidth / 2 + circleRadius + 120))\n            .attr(\"height\", svgHeight);\n\n    }, [commits, onSelectCommit]);\n\n    return (\n        <div id=\"git-graph\"></div>\n    );\n}\n\nexport default GitGraph;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}